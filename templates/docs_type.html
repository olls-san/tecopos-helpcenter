{% extends "base.html" %}

{% block title %}
{% if doc_type == "guia" %}
Guías – Centro de Ayuda Tecopos
{% elif doc_type == "comportamiento" %}
Buenas prácticas – Centro de Ayuda Tecopos
{% elif doc_type == "faq" %}
FAQ – Centro de Ayuda Tecopos
{% elif doc_type == "novedad" %}
Novedades – Centro de Ayuda Tecopos
{% else %}
Documentos – Centro de Ayuda Tecopos
{% endif %}
{% endblock %}

{% block hero %}
<header class="hero-header">
    <h1>
        {% if doc_type == "guia" %}
            Guías
        {% elif doc_type == "comportamiento" %}
            Buenas prácticas
        {% elif doc_type == "faq" %}
            Preguntas frecuentes
        {% elif doc_type == "novedad" %}
            Novedades
        {% else %}
            Documentos
        {% endif %}
    </h1>
    <p>Explora todos los recursos de esta categoría.</p>
</header>
{% endblock %}

{% block content %}
<section class="section">

    {% if items %}
    <div class="cards">
        {% for item in items %}
            <a href="/errors/{{ item.id }}" class="card">
                <div class="block-label">
                    {% if doc_type == "guia" %}
                        Guía
                    {% elif doc_type == "comportamiento" %}
                        Comportamiento
                    {% elif doc_type == "faq" %}
                        FAQ
                    {% elif doc_type == "novedad" %}
                        Novedad
                    {% else %}
                        Documento
                    {% endif %}
                </div>
                <h3>{{ item.title }}</h3>
                <p>
                    {# Se muestra la descripción breve si existe. En su defecto se muestra la descripción larga, respuesta o un texto por defecto. #}
                    {% if item.short_description %}
                        {{ item.short_description }}
                    {% elif item.description %}
                        {{ item.description | truncate(120, True, '…') }}
                    {% elif item.answer %}
                        {{ item.answer | truncate(120, True, '…') }}
                    {% else %}
                        Sin descripción disponible.
                    {% endif %}
                </p>
                <div class="card-meta">
                    <span class="tag tag-category">{{ item.category }}</span>
                    {% if item.is_common %}
                        <span class="tag tag-common">Frecuente</span>
                    {% endif %}
                </div>
            </a>
        {% endfor %}
    </div>
    {% else %}
        <p>No hay documentos de este tipo todavía.</p>
    {% endif %}
</section>
{% endblock %}
